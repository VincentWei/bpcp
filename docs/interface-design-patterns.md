## 第五讲：接口设计模式

- 时间/上：2021 年 11 月 18 日（周四）20:00
- 时间/下：2021 年 11 月 25 日（周四）20:00
- 地点：微信视频号“考鼎录”直播间

		
## 提纲（上）

1. 两个接口设计原则
1. 一般性技巧和方法
1. 模式一：抽象数据类型
1. 模式二：抽象算法
1. 模式三：事件驱动
1. Q & A

		
## 提纲（下）
1. 模式四：隐式上下文
1. 模式五：通用数据结构
1. 模式六：抽象聚类
1. 模式七：接口兼容性
1. Q & A

		
## 两个接口设计原则

1. 自洽（self-consistency）
1. 完备（completeness）

		
## 一般性方法和技巧

1. 参数及返回值
1. 标志或者枚举量的定义和使用
1. 函数属性

		
## 模式一：抽象数据类型

1. 围绕抽象数据结构设计接口
1. 接口的完备性和对称性
1. 隐藏实现细节，为增强、优化和可扩展性打下基础

		
## 模式二：抽象算法
   - 围绕抽象算法设计接口
   - 算法不依赖于具体的数据类型
   - 算法不依赖于具体的数据存储方式

		
## 模式三：事件驱动

1. 事件循环及消息队列
1. 回调函数的粒度（granularity）

		
## Q & A

		
## 模式四：隐式上下文

1. 上下文本质上是个全局变量
1. 使用线程局部存储（TLS）实现线程安全

		
## 模式五：通用数据结构

1. 在用户数据结构中包含算法数据结构
1. 在算法数据结构中保留用户数据字段
1. 迭代函数或迭代宏

		
## 模式六：抽象聚类

1. 抽象操作集
1. 注册及吊销子类

		
## 模式七：接口兼容性

1. 新增接口而非修改原有接口的语义
1. 二进制兼容或源代码兼容
1. 宏或者内联函数实现接口的向后兼容性

		
## Q & A

